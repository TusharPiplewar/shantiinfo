{% comment %} <html>
    hello{{title}}

    <div class="input-group mb-3">
        <form method="GET"> 
        <input type="text" name = "serch_d" class="form-control" placeholder="Search...">
        <input type="submit" value="search"/>
        </form>
    </div> {% endcomment %}
    </html>
    <!doctype html>
    <html lang="en">
      <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <title>Project.</title>
      </head>
      <body>
    
        <div class="mt-5">
            <nav class="navbar navbar-light bg-white justify-content-between ">
                <form class="form-inline" method="GET">
            <input class="form-control form-control2 mr-sm-2" name = "serch_d" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success custom-search" type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
                </form>
          <a class="navbar-brand"><button type="button" class="btn btn-primary btn-custom" data-toggle="modal" data-target="#exampleModalCenter">
            <i class="fa fa-plus" aria-hidden="true"></i> &nbsp; Add Task </button></a>
          
        </nav>
        </div>
        <div class="container-fluid mt-1" >
              <div class="row"> 
                <div class="col-md-3">
                    <div class="bg-custom">
                    <h6>STEP 1</h6  >
                        {% for i in title %}
                        {% if i.task_step == "1"%}
                        <div class="card-custom">

                            <div class="heading">{{forloop.counter}}</div>
                            
                            <div class="text-danger delete-icon">
                                <a href="{{i.id}}/delete/">
                                    <button class="delete-icon" type="submit"> <i class="fa fa-trash" aria-hidden="true"></i> Delete</button>
                                    </a>
                                </div>
                                <br>
                                <p>ID : {{i.id}}<br> Reason : {{i.task_reason}} <br> Date : {{i.created_date}}</p>
                            <div class="mt-2 arrow-custom">
                                <div class="arrow-custom2">
                            <!-- <i class="fa fa-arrow-left left-custom" aria-hidden="true"></i> -->
                            {% comment %} <i class="fa fa-arrow-right right-custom" aria-hidden="true"></i> {% endcomment %}
                            <a href="{{i.task_step}}/{{'greater'}}/{{i.id}}/update/">
                                <i class="fa fa-arrow-right right-custom" aria-hidden="true"><button class="delete-icon" type="submit"></button></i>
                            </a> 
                            
                            </div>
                            </div>
                          </div>
                            {% endif %}
                            {% endfor %}
                        
    
                      
                    
                      </div>
    
                </div>
                <div class="col-md-3">
                    <div class="bg-custom">
                    <h6>STEP 2</h6  >
                        {% for i in title %}
                        {% if i.task_step == "2" %}
                        <div class="card-custom">
                            <div class="heading">{{forloop.counter}}</div>
                            <div class="text-danger delete-icon">
                                <a href="{{i.id}}/delete/">
                                    <button class="delete-icon" type="submit"> <i class="fa fa-trash" aria-hidden="true"></i> Delete</button>
                                    </a>
                                </div>
                                <br>
                                <p>ID : {{i.id}}<br> Reason : {{i.task_reason}} <br> Date : {{i.created_date}}</p>
                            <div class="mt-2 arrow-custom">
                                <div class="arrow-custom2">
                                    <a href="{{i.task_step}}/{{'greater'}}/{{i.id}}/update/">
                                        <i class="fa fa-arrow-right right-custom" aria-hidden="true"><button class="delete-icon" type="submit"></button></i>
                                    </a> 
                                    <a href="{{i.task_step}}/{{'less'}}/{{i.id}}/update/">
                                        <i class="fa fa-arrow-left left-custom" aria-hidden="true"><button class="delete-icon" type="submit"></button></i>
                                        </a>
                            </div>
                            </div>
                          </div>
                          {% endif %}
                          {% endfor %}                    
                      </div>
    
                </div>
                <div class="col-md-3">
                    <div class="bg-custom">
                    <h6>STEP 3</h6  >
                        {% for i in title %}
                        {% if i.task_step == "3"%}
                        <div class="card-custom">
                            <div class="heading">{{forloop.counter}}</div>
                            <div class="text-danger delete-icon">
                                <a href="{{i.id}}/delete/">
                                    <button class="delete-icon" type="submit"> <i class="fa fa-trash" aria-hidden="true"></i> Delete</button>
                                    </a>   
                                </div>
                                <br>
                                <p>ID : {{i.id}}<br> Reason : {{i.task_reason}} <br> Date : {{i.created_date}}</p>
                            <div class="mt-2 arrow-custom">
                                <div class="arrow-custom2">
                                    <a href="{{i.task_step}}/{{'greater'}}/{{i.id}}/update/">
                                        <i class="fa fa-arrow-right right-custom" aria-hidden="true"><button class="delete-icon" type="submit"></button></i>
                                    </a> 
                                    <a href="{{i.task_step}}/{{'less'}}/{{i.id}}/update/">
                                        <i class="fa fa-arrow-left left-custom" aria-hidden="true"><button class="delete-icon" type="submit"></button></i>
                                        </a> 
                            </div>
                            </div>
                          </div>
                          {% endif %}
                          {% endfor %}
                    
                    
                      </div>
    
                </div>
           
                    <div class="col-md-3">
                        <div class="bg-custom">
                        <h6>STEP 4</h6  >
                            {% for i in title %}
                        {% if i.task_step == "4"%}
                            <div class="card-custom">
                                <div class="heading">{{forloop.counter}}</div>
                                <div class="text-danger delete-icon">
                                    <a href="{{i.id}}/delete/">
                                    <button class="delete-icon" type="submit"> <i class="fa fa-trash" aria-hidden="true"></i> Delete</button>
                                    </a>
                                </div> 
                                <br>
                                <p>ID : {{i.id}}<br> Reason : {{i.task_reason}} <br> Date : {{i.created_date}}</p>
                                    <div class="mt-2 arrow-custom">
                                    <div class="arrow-custom2">
                                <a href="{{i.task_step}}/{{'less'}}/{{i.id}}/update/">
                                    <i class="fa fa-arrow-left left-custom" aria-hidden="true"><button class="delete-icon" type="submit"></button></i>
                                </a>
                                </div>
                                </div>
                                
                              </div>
                              {% endif %}
                              {% endfor %}
    
                          
                        
                          </div>
    
                    </div>
              </div> 
        </div>
        <!-- Button trigger modal -->
    
    
    <!-- Modal -->
    <!-- Button trigger modal -->
    {% comment %} {{title}} {% endcomment %}
    
      
      <!-- Modal -->

      {% comment %} <!DOCTYPE html>
        <html>
        <head>
            <title>Delete Confirmation</title>
        </head>
        <body>
            <h2>Confirm Deletion</h2>
            <p>Are you sure you want to delete this record?</p>
            <form method="post">
                {% csrf_token %}
                <button type="submit">Yes, Delete</button>
            </form>
        </body>
        </html> {% endcomment %}

      <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Add Task</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                
                    <div class="form-group">
                            
                            <label for="task_reason">Task Reason:</label>
                            <input type="text" class="form-control" id="task_reason" name="task_reason" required><br><br>
                            
                      </div>
                    
                    <button  onclick="add_task()" class="btn btn-primary">Add Task</button>
                
            </div>
           
          </div>
        </div>
      </div>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
      </body>
    
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <script >
        
        function add_task(){
            
            var task_reason = $('#task_reason').val()
            console.log(task_reason)
                        
            // create an AJAX call
            $.ajax({
                 // get the form data
                url: "{% url 'addtask' %}",
                type:"GET",
                dataType: "json",
                data: {
                    task_reason: task_reason,
                    //csrfmiddilewaretoken:"{{csrf_token}}"
                },
                //csrfmiddlewaretoken: '{% csrf_token %}'

                // on success
                success: function(response) {
                   console.log(response)
                   Swal.fire(
                    'Done',
                    'Your Task Is Created',
                    'success'
                    ).then((result) => {
                        if (result.isConfirmed) {
                          // Reload the window
                          location.reload();
                        }
                      });
                    //window.location.reload();
                    },
                    
                // on error
                error: function(response) {
                    // alert the error if any error occured
                    console.log(response.responseJSON.errors)
                }
                
            })
        }

             </script>
             </html>

    <style>
        .bg-custom{
            background-color: #eee;
            padding: 15px 12px;
            min-height: 500px;
            border-radius: 5px;
        }
        
        .btn-custom{
            background-color: #eee;
            border: 0px!important;
            color: #000!important;
            font-size: 12px;
            font-weight: 600!important;
        }
        
        .card-custom{
            background-color: #fff;
            height: 230px;
            padding: 10px;
            margin: 22px 0px;
        }
        .card-custom .heading{
           float: left;
        }
        .card-custom .delete-icon{
        float: right;
        border: 0px;
        background: transparent;
        color: #dc3545!important;
        font-size: 13px;
        }
        .arrow-custom{
            text-align: right;
        }
        
        .arrow-custom i{
            font-size: 12px;
            padding: 2px;
            border: 1px solid #d9d0d0;
            border-radius: 20px;
            font-weight: 200;
        }
        .arrow-custom2{
            margin-top: 80px;
        }
        .left-custom{
            float: left;
        }
        .right-custom{
            float: right;
        }
        .custom-search{
            position: absolute;
            left: 279px;
            border: 0px;
            color: #00000059;
        }
        .form-control2{
            width: 303px!important;
            background-color: #eee;
        }
        .btn-primary:hover{
            background-color: #eee!important;
        }
        .btn-primary.focus, .btn-primary:focus{
            box-shadow: none!important;
        }
    </style>